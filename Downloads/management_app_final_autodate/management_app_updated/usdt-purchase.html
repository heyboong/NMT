<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báº£ng GiÃ¡ Nháº­p USDT - Há»‡ Thá»‘ng Quáº£n LÃ½</title>
    
    <!-- Preconnect to CDN -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/sheet.css" />
    
    <script src="config.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <a href="index.html">ğŸ  Trang Chá»§</a>
        <a href="dashboard.html">ğŸ“Š Báº£ng ChÃ­nh</a>
        <a href="AE.html">ğŸ’¼ Báº£ng AE</a>
        <a href="AE-QT.html">ğŸŒ Báº£ng AE-QT</a>
        <a href="balance.html">ğŸ‘¥ Danh SÃ¡ch TÃªn</a>
        <a href="usdt-purchase.html" class="active">ğŸ’° Nháº­p USDT</a>
        <a href="rate.html">ğŸ’± Tá»· GiÃ¡ USD</a>
        <a href="expense.html">ğŸ’¸ Thu Chi</a>
        <a href="settings.html">âš™ï¸ CÃ i Äáº·t</a>
    </nav>

    <div class="container">
        <style>
            .datetime-stack {
                display: flex;
                flex-direction: column;
                gap: 6px;
                width: 100%;
            }
            .datetime-stack input[type="time"],
            .datetime-stack input[type="date"] {
                width: 100%;
                box-sizing: border-box;
                padding: 8px;
                border: 1px solid #e5e7eb;
                border-radius: 4px;
                background: #fff;
            }
            /* TÃ´ mÃ u xanh dÆ°Æ¡ng cho cá»™t GiÃ¡ Nháº­p (cá»™t thá»© 5) vÃ  GiÃ¡ P2P BÃ¡n (cá»™t thá»© 7) */
            #usdt-purchase-table tbody tr td:nth-child(5),
            #usdt-purchase-table tbody tr td:nth-child(7) {
                background: #dbeafe !important;
            }
        </style>
        <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:12px;">
            <h1 style="margin:0; font-size:22px; color:#111827; display:flex; align-items:center; gap:8px;">
                <span>ğŸ’°</span> Nháº­p USDT
            </h1>
            <div id="dashboard-toolbar" style="display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
                <span id="p2p-rate-display" style="padding:8px 10px; background:#eef2ff; color:#111827; border:1px solid #e5e7eb; border-radius:8px; font-weight:600; display:flex; align-items:center; gap:6px;">
                    <span>ğŸ’± GiÃ¡ P2P:</span>
                    <span id="current-p2p-rate">0â‚«</span>
                </span>
                <button id="refresh-p2p-btn" onclick="loadP2PRate()" style="padding:8px 12px; background:#2563eb; color:white; border:none; border-radius:8px; font-weight:600; cursor:pointer;">ğŸ”„ Cáº­p nháº­t</button>
                <button id="export-usdt-btn" style="padding:8px 12px; background:#10b981; color:white; border:none; border-radius:8px; font-weight:600; cursor:pointer;">ğŸ“¥ Xuáº¥t Excel</button>
                <button id="add-row-btn" style="padding:8px 12px; background:#3b82f6; color:white; border:none; border-radius:8px; font-weight:600; cursor:pointer;">â• ThÃªm dÃ²ng</button>
            </div>
        </div>

        <!-- Báº£ng tá»•ng há»£p riÃªng -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px;">
            <div style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); padding: 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <div style="font-size: 12px; color: #065f46; font-weight: 600; margin-bottom: 4px; text-transform: uppercase;">ğŸ’° Tá»•ng Tiá»n Nháº­p</div>
                <div id="total-tien-nhap" style="font-size: 20px; font-weight: 800; color: #059669;">0â‚«</div>
            </div>
            <div style="background: linear-gradient(135deg, #fecaca 0%, #fca5a5 100%); padding: 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <div style="font-size: 12px; color: #991b1b; font-weight: 600; margin-bottom: 4px; text-transform: uppercase;">ğŸ’µ Tá»•ng USDT</div>
                <div id="total-usdt" style="font-size: 20px; font-weight: 800; color: #dc2626;">0.00 $</div>
            </div>
            <div style="background: linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%); padding: 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <div style="font-size: 12px; color: #6b21a8; font-weight: 600; margin-bottom: 4px; text-transform: uppercase;">ğŸ“Š GiÃ¡ Nháº­p TB</div>
                <div id="avg-gia-nhap" style="font-size: 20px; font-weight: 800; color: #7c3aed;">0â‚«</div>
            </div>
            <div style="background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%); padding: 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <div style="font-size: 12px; color: #9a3412; font-weight: 600; margin-bottom: 4px; text-transform: uppercase;">ğŸ’¼ Tá»•ng Tiá»n LÃ m</div>
                <div id="total-tien-lam" style="font-size: 20px; font-weight: 800; color: #ea580c;">0â‚«</div>
            </div>
            <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); padding: 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <div style="font-size: 12px; color: #1e3a8a; font-weight: 600; margin-bottom: 4px; text-transform: uppercase;">ğŸ“ˆ LÃ£i/Lá»— TB</div>
                <div id="avg-lai-lo" style="font-size: 20px; font-weight: 800; color: #3b82f6;">0%</div>
            </div>
        </div>

        <div class="table-container" style="background:white; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.06); overflow:hidden;">
            <table id="usdt-purchase-table" class="sheet adjustable-table" data-row-resize="true">
                <thead>
                    <tr>
                        <th class="row-header">#</th>
                        <th style="width: 160px;">NgÃ y/Giá» Nháº­p</th>
                        <th style="width: 150px;">Tiá»n Nháº­p (VND)</th>
                        <th style="width: 130px;">Nháº­n USDT ($)</th>
                        <th style="width: 140px; background: #dbeafe; color: #1e40af;">GiÃ¡ Nháº­p (VND)</th>
                        <th style="width: 150px;">Tiá»n LÃ m (VND)</th>
                        <th style="width: 150px; background: #dbeafe; color: #1e40af;">GiÃ¡ P2P BÃ¡n (VND)</th>
                        <th style="width: 130px;">LÃ£i/Lá»— (%)</th>
                        <th style="width: 140px;">Thao TÃ¡c</th>
                    </tr>
                </thead>
                <tbody id="usdt-purchase-tbody">
                    <!-- Dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c thÃªm Ä‘á»™ng -->
                </tbody>
            </table>
        </div>

    <!-- Scripts -->
    <script src="assets/js/notification.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/button-effects.js"></script>
    <script src="assets/js/text-color-highlight.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <script src="assets/js/supabase-sync.js"></script>
    <script src="assets/js/usdt-purchase.js"></script>
    <script src="assets/js/note-manager.js"></script>
    <script src="assets/js/export.js"></script>
</body>
</html>
