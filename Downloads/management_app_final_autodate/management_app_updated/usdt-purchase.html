<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B·∫£ng Gi√° Nh·∫≠p USDT - H·ªá Th·ªëng Qu·∫£n L√Ω</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/sheet.css" />
    <!-- API Configuration -->
    <script src="config.js"></script>
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <a href="index.html">üè† Trang Ch·ªß</a>
        <a href="dashboard.html">üìä B·∫£ng Ch√≠nh</a>
        <a href="AE.html">üíº B·∫£ng AE</a>
        <a href="AE-QT.html">üåê B·∫£ng AE-QT</a>
        <a href="balance.html">üë• Danh S√°ch T√™n</a>
        <a href="usdt-purchase.html" class="active">üí∞ Gi√° Nh·∫≠p USDT</a>
        <a href="rate.html">üí± T·ª∑ Gi√° USD</a>
        <a href="settings.html">‚öôÔ∏è C√†i ƒê·∫∑t</a>
    </nav>

    <div class="container">
        <!-- Header v·ªõi th·ªëng k√™ -->
        <div style="margin-bottom: 24px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <h1 style="margin: 0; color: #1f2937; display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 32px;">üí∞</span>
                    B·∫£ng Gi√° Nh·∫≠p USDT
                </h1>
                <div style="display: flex; gap: 12px; align-items: center;">
                    <div id="p2p-rate-display" style="padding: 10px 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; font-weight: 600; display: flex; align-items: center; gap: 8px;">
                        <span>üí± Gi√° P2P:</span>
                        <span id="current-p2p-rate">0‚Ç´</span>
                    </div>
                    <button id="refresh-p2p-btn" onclick="loadP2PRate()" style="padding: 10px 20px; background: #3b82f6; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <span>üîÑ</span> C·∫≠p Nh·∫≠t Gi√°
                    </button>
                    <button id="clear-all-btn" onclick="clearAllData()" style="padding: 10px 20px; background: #ef4444; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <span>üóëÔ∏è</span> X√≥a To√†n B·ªô
                    </button>
                    <button id="export-usdt-btn" style="padding: 10px 20px; background: #10b981; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <span>üì•</span> Xu·∫•t Excel
                    </button>
                </div>
            </div>

            <!-- Th·ªëng k√™ nhanh -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px;">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 16px; border-radius: 10px; color: white;">
                    <div style="font-size: 12px; opacity: 0.9; margin-bottom: 4px;">T·ªïng Ti·ªÅn L√†m (V·ªën)</div>
                    <div id="stat-total-input" style="font-size: 24px; font-weight: 700;">0‚Ç´</div>
                </div>
                <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 16px; border-radius: 10px; color: white;">
                    <div style="font-size: 12px; opacity: 0.9; margin-bottom: 4px;">T·ªïng USDT</div>
                    <div id="stat-total-usdt" style="font-size: 24px; font-weight: 700;">0 $</div>
                </div>
                <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 16px; border-radius: 10px; color: white;">
                    <div style="font-size: 12px; opacity: 0.9; margin-bottom: 4px;">T·ªïng Ti·ªÅn B√°n (Thu v·ªÅ)</div>
                    <div id="stat-total-sell" style="font-size: 24px; font-weight: 700;">0‚Ç´</div>
                </div>
                <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); padding: 16px; border-radius: 10px; color: white;">
                    <div style="font-size: 12px; opacity: 0.9; margin-bottom: 4px;">L√£i/L·ªó</div>
                    <div id="stat-total-final" style="font-size: 24px; font-weight: 700;">0‚Ç´</div>
                </div>
            </div>
        </div>

        <!-- B·∫£ng d·ªØ li·ªáu -->
        <div class="table-container" style="background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); overflow: hidden;">
            <table id="usdt-purchase-table">
                <thead>
                    <tr>
                        <th style="width: 120px;">Ng√†y</th>
                        <th style="width: 150px;">Ti·ªÅn L√†m (VND)</th>
                        <th style="width: 130px;">USDT ($)</th>
                        <th style="width: 150px;">Gi√° Nh·∫≠p (VND)</th>
                        <th style="width: 150px;">Gi√° B√°n (VND)</th>
                        <th style="width: 150px;">Ti·ªÅn B√°n (VND)</th>
                        <th style="width: 150px;">T·ªïng C·ªông (VND)</th>
                        <th style="width: 90px;">Thao T√°c</th>
                    </tr>
                </thead>
                <tbody id="usdt-purchase-tbody">
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông -->
                </tbody>
            </table>

            <!-- N√∫t th√™m h√†ng m·ªõi -->
            <div style="padding: 16px; background: #f9fafb; border-top: 1px solid #e5e7eb;">
                <button id="add-row-btn" style="padding: 10px 20px; background: #3b82f6; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;">
                    <span style="font-size: 16px;">+</span> Th√™m D√≤ng M·ªõi
                </button>
            </div>
        </div>

        <!-- H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng -->
        <div style="margin-top: 24px; padding: 16px; background: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 8px;">
            <h3 style="margin: 0 0 12px 0; color: #1e40af; font-size: 16px;">üìñ H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng</h3>
            <ul style="margin: 0; padding-left: 20px; color: #1e40af; line-height: 1.8;">
                <li><strong>Ng√†y:</strong> Ng√†y th·ª±c hi·ªán giao d·ªãch</li>
                <li><strong>Ti·ªÅn L√†m (VND):</strong> S·ªë ti·ªÅn v·ªën ƒë·∫ßu t∆∞ ƒë·ªÉ mua USDT</li>
                <li><strong>USDT ($):</strong> S·ªë l∆∞·ª£ng USDT ƒë√£ mua</li>
                <li><strong>Gi√° Nh·∫≠p (VND):</strong> Gi√° mua v·ªën = Ti·ªÅn L√†m √∑ USDT (t·ª± ƒë·ªông t√≠nh)</li>
                <li><strong>Gi√° B√°n (VND):</strong> Gi√° b√°n hi·ªán t·∫°i (t·ª± ƒë·ªông c·∫≠p nh·∫≠t t·ª´ gi√° P2P khi tr·ªëng)</li>
                <li><strong>Ti·ªÅn B√°n (VND):</strong> T·ªïng ti·ªÅn thu v·ªÅ = USDT √ó Gi√° B√°n (t·ª± ƒë·ªông t√≠nh)</li>
                <li><strong>T·ªïng C·ªông (VND):</strong> L√£i/l·ªó = Ti·ªÅn B√°n - Ti·ªÅn L√†m (t·ª± ƒë·ªông t√≠nh)</li>
                <li><strong>üí° T·ª± ƒë·ªông:</strong> Gi√° P2P s·∫Ω t·ª± ƒë·ªông ƒëi·ªÅn v√†o c√°c √¥ "Gi√° B√°n" ƒëang tr·ªëng khi b·∫°n c·∫≠p nh·∫≠t gi√°</li>
            </ul>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/app.js"></script>
    <script src="assets/js/button-effects.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="assets/js/supabase-sync.js"></script>
    <script src="assets/js/usdt-purchase.js"></script>
    <script src="assets/js/note-manager.js"></script>
    <script src="assets/js/export.js"></script>
</body>
</html>
